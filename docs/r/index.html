<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0"><meta property="og:title" content="R" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://teuder.github.io/notebook/r/" />
<meta property="og:updated_time" content="2020-05-27T18:54:29+09:00" />
<title>R | notebook</title>
<link rel="icon" href="/notebook/favicon.png" type="image/x-icon">


<link rel="stylesheet" href="/notebook/book.min.07c38dce7b6800da2a75a565d4d975e38f837294e24d00b5aae363037012d64b.css" integrity="sha256-B8ONzntoANoqdaVl1Nl144&#43;DcpTiTQC1quNjA3AS1ks=">


<script defer src="/notebook/search.min.772a8582b9cfeaafec5d5d6ca01eda63b67a98858f47e91c9f5969d050ce4271.js" integrity="sha256-dyqFgrnP6q/sXV1soB7aY7Z6mIWPR&#43;kcn1lp0FDOQnE="></script>

<link rel="alternate" type="application/rss+xml" href="https://teuder.github.io/notebook/r/index.xml" title="notebook" />
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      <nav>
<h2 class="book-brand">
  <a href="https://teuder.github.io/notebook/"><span>notebook</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" placeholder="Search" id="book-search-input" maxlength="64" />
  <div class="book-search-spinner spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>





    

  






  <ul>
  
    

  <li >
    
      

  <a href="/notebook/docs/" >
      About
  </a>


    

    




  
  <ul>
    
  </ul>
  



  </li>


  
    

  <li >
    
      

  <a href="/notebook/python/" >
      Python
  </a>


    

    




  
  <ul>
    
      
        <li>

  <a href="/notebook/python/environment/" >
      environment
  </a>

</li>
      
    
      
        <li>

  <a href="/notebook/python/vscode/" >
      Python in VScode
  </a>

</li>
      
    
      
        <li>

  <a href="/notebook/python/anaconda/" >
      anaconda
  </a>

</li>
      
    
  </ul>
  



  </li>


  
    

  <li >
    
      

  <a href="/notebook/r/"  class="active">
      R
  </a>


    

    




  
  <ul>
    
      
        <li>

  <a href="/notebook/r/rhdf5/" >
      rhdf5
  </a>

</li>
      
    
      
        <li>

  <a href="/notebook/r/ggplot2/" >
      ggplot2
  </a>

</li>
      
    
      
        <li>

  <a href="/notebook/r/raster/" >
      raster
  </a>

</li>
      
    
      
        <li>

  <a href="/notebook/r/sf/" >
      sf
  </a>

</li>
      
    
      
        <li>

  <a href="/notebook/r/bigrquery/" >
      bigrquery
  </a>

</li>
      
    
      
        <li>

  <a href="/notebook/r/gganimate/" >
      gganimate
  </a>

</li>
      
    
      
        <li>

  <a href="/notebook/r/lubridate/" >
      lubridate
  </a>

</li>
      
    
      
        <li>

  <a href="/notebook/r/purrr/" >
      purrr
  </a>

</li>
      
    
      
        <li>

  <a href="/notebook/r/reticulate/" >
      reticulate
  </a>

</li>
      
    
      
        <li>

  <a href="/notebook/r/rmarkdown/" >
      Rmarkdown
  </a>

</li>
      
    
      
        <li>

  <a href="/notebook/r/rstudio/" >
      RStudio
  </a>

</li>
      
    
      
        <li>

  <a href="/notebook/r/stars/" >
      stars
  </a>

</li>
      
    
      
        <li>

  <a href="/notebook/r/dbi/" >
      DBI
  </a>

</li>
      
    
  </ul>
  



  </li>


  
    

  <li >
    
      

  <a href="/notebook/datascience/" >
      Data Science
  </a>


    

    




  
  <ul>
    
  </ul>
  



  </li>


  
    

  <li >
    
      

  <a href="/notebook/gis/" >
      GIS &amp; Remote Sensing
  </a>


    

    




  
  <ul>
    
      
        <li>

  <a href="/notebook/gis/bigquerygis/" >
      BigQuery GIS
  </a>

</li>
      
    
      
        <li>

  <a href="/notebook/gis/sar/" >
      SAR
  </a>

</li>
      
    
      
        <li>

  <a href="/notebook/gis/terminology/" >
      用語
  </a>

</li>
      
    
      
        <li>

  <a href="/notebook/gis/viirs/" >
      VIIRS
  </a>

</li>
      
    
      
        <li>

  <a href="/notebook/gis/r_package/" >
      GIS関連Rパッケージ
  </a>

</li>
      
    
  </ul>
  



  </li>


  
    

  <li >
    
      

  <a href="/notebook/mac/" >
      Mac
  </a>


    

    




  
  <ul>
    
      
        <li>

  <a href="/notebook/mac/homebrew/" >
      homebrew
  </a>

</li>
      
    
  </ul>
  



  </li>


  
    

  <li >
    
      

  <a href="/notebook/maritime/" >
      Maritime
  </a>


    

    




  
  <ul>
    
  </ul>
  



  </li>


  
    

  <li >
    
      

  <a href="/notebook/miscellaneous/" >
      miscellaneous
  </a>


    

    




  
  <ul>
    
      
        <li>

  <a href="/notebook/miscellaneous/bigquery/" >
      BigQuery
  </a>

</li>
      
    
      
        <li>

  <a href="/notebook/miscellaneous/jupyter/" >
      jupyter
  </a>

</li>
      
    
      
        <li>

  <a href="/notebook/miscellaneous/vscode/" >
      vscode
  </a>

</li>
      
    
      
        <li>

  <a href="/notebook/miscellaneous/hugo/" >
      Hugo
  </a>

</li>
      
    
      
        <li>

  <a href="/notebook/miscellaneous/git/" >
      git
  </a>

</li>
      
    
  </ul>
  



  </li>


  
  </ul>











</nav>


<script>
(function() {
  var menu = document.querySelector("aside.book-menu nav");
  addEventListener("beforeunload", function(event) {
    localStorage.setItem("menu.scrollTop", menu.scrollTop);
  });
  menu.scrollTop = localStorage.getItem("menu.scrollTop");
})();
</script>

    </aside>

    <div class="book-page">
      <header class="flex align-center justify-between book-header">
  <label for="menu-control">
    <img src="/notebook/svg/menu.svg" alt="Menu" />
  </label>
  <strong>R</strong>
</header>

      
<article class="markdown"><h1 id="r">R</h1>
<h1 id="コーディングスタイル">コーディングスタイル</h1>
<p><a href="https://style.tidyverse.org/">The tidyverse style guide</a></p>
<h1 id="ソースコードを確認">ソースコードを確認</h1>
<p>lookup パッケージ</p>
<pre><code>devtools::install_github(&quot;jimhester/lookup&quot;)
lookup::lookup(dplyr::summarise)
</code></pre><h1 id="バージョン管理">バージョン管理</h1>
<ul>
<li><a href="https://rud.is/rswitch/">RSwitch</a> R本体のバージョン管理 <a href="https://twitter.com/hrbrmstr">https://twitter.com/hrbrmstr</a></li>
<li>renv, packrat : パッケージのバージョン管理</li>
</ul>
<h1 id="並列計算">並列計算</h1>
<p><code>furrr</code> : <code>purrr</code> と同様の使い方で並列に計算できる</p>
<h1 id="可視化">可視化</h1>
<p><a href="https://www.data-to-viz.com/">Data to Viz</a></p>
<h1 id="インストール">インストール</h1>
<h2 id="ubuntu">Ubuntu</h2>
<ul>
<li><a href="https://cran.rstudio.com/bin/linux/ubuntu/README.html">UBUNTU PACKAGES FOR R</a></li>
<li><a href="https://qiita.com/JeJeNeNo/items/43fc95c4710c668e86a2">Ubuntuに最新版のRをインストールする</a></li>
</ul>
<h1 id="環境設定">環境設定</h1>
<h2 id="環境変数">環境変数</h2>
<pre><code>Sys.getenv()
</code></pre><pre><code>Sys.setenv(&quot;LANGUAGE&quot;=&quot;ja_Jp.UTF-8&quot;)
</code></pre><h2 id="環境設定ファイル">環境設定ファイル</h2>
<p>ユーザーごとのRの設定ファイルは（Rが思っている）ユーザーのホームディレクトリ <code>R_USER</code> に配置しておくとよい。</p>
<pre><code>&gt; Sys.getenv(&quot;R_USER&quot;)
[1] &quot;C:/Users/tsuda/Documents&quot;
</code></pre><h3 id="renviron">.Renviron</h3>
<p>環境変数を指定するシェルスクリプト</p>
<pre><code>R_USER=${HOME}/.R
R_LIBS_USER=${R_USER}/library
R_ENVIRON_USER=${R_USER}/.Renviron
R_PROFILE_USER=${R_USER}/.Rprofile
R_HISTFILE=${R_USER}/.Rhistory
R_HISTSIZE=65535
LANG=C
LC_CTYPE=en_US.UTF-8
</code></pre><h3 id="rprofile">.Rprofile</h3>
<p>Rの起動時や終了時に実行したいRのスクリプト</p>
<p><a href="https://cran.r-project.org/doc/manuals/R-intro.html#Customizing-the-environment">https://cran.r-project.org/doc/manuals/R-intro.html#Customizing-the-environment</a></p>
<h3 id="rmakevars">~/.R/Makevars</h3>
<p><a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Using-Makevars">https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Using-Makevars</a></p>
<pre><code>CC=/opt/local/bin/gcc-mp-4.7
CXX=/opt/local/bin/g++-mp-4.7

CPLUS_INCLUDE_PATH=/opt/local/include:$CPLUS_INCLUDE_PATH
LD_LIBRARY_PATH=/opt/local/lib:$LD_LIBRARY_PATH
CXXFLAGS= -g0 -O3 -Wall

MAKE=make -j4
</code></pre><h1 id="ロケール文字コード">ロケール、文字コード</h1>
<h2 id="ロケールを指定する文字列">ロケールを指定する文字列</h2>
<p>ロケールとは表示する言語・文字コードや数字や時刻の表示形式を変更するための設定のこと</p>
<ul>
<li><a href="https://cran.r-project.org/doc/manuals/r-patched/R-admin.html#Locales">R manual: Locale</a></li>
<li><a href="https://notchained.hatenablog.com/entry/2015/06/19/233502">WindowsでRのロケールを設定するときのメモ</a></li>
</ul>
<p>次の３つの情報を指定する文字列</p>
<ul>
<li>言語 ja</li>
<li>領域 jp</li>
<li>文字コード utf-8</li>
</ul>
<p>ロケールの指定形式はOSにより異なる</p>
<ul>
<li>Windows
<ul>
<li><code>Japanese_Japan.932</code> 日本語、日本国、Windows拡張Shift-JIS（コードページ932）</li>
<li><code>English_United States.1252</code></li>
<li>省略した入力として <code>Japanese</code> <code>English</code> でも良い（エンコーディングはデフォルトで言語だけ変えたいとき）</li>
</ul>
</li>
<li>Mac, Linux
<ul>
<li><code>ja_JP.UTF-8</code></li>
<li><code>en_US.UTF-8</code></li>
</ul>
</li>
</ul>
<h2 id="環境変数-1">環境変数</h2>
<p>メッセージを変えたいだけなら <code>.Renviron</code> ファイルの中で <code>LANGUAGE</code> 環境変数を設定する</p>
<p>.Renviron</p>
<pre><code>LANGUAGE=English
#LANGUAGE=Japanese
</code></pre><p>表示されるメッセージの言語は、最初に環境変数 <code>LANGUAGE</code> の設定が読まれる。次に <code>LC_ALL</code>, <code>LC_MESSAGES</code> and <code>LANG</code></p>
<p>Rでロケールに関連する環境変数</p>
<ul>
<li><code>LC_MESSAGES</code> : R で表示されるメッセージの設定</li>
<li><code>LC_COLLATE</code> : 並び換えや正規表現に用いる文字の照合順序に影響します。</li>
<li><code>LC_CTYPE</code> : 文字の判定・操作・文字数のカウントなどに影響します。</li>
<li><code>LC_MONETARY</code> : 金額に関連する数値、通貨記号の表示に影響します。</li>
<li><code>LC_NUMERIC</code> : 金額に関係しない数値の表示（小数の区切り文字など）に影響します。</li>
<li><code>LC_TIME</code> : 日付と時刻の表示に影響します。</li>
<li><code>LC_ALL</code> : これが設定されていると他のロケール設定（<code>LC_*</code>）よりも優先して、こちらの設定が使われる</li>
</ul>
<pre><code>
 Sys.setlocale(&quot;LC_MESSAGES&quot;, &quot;English&quot;)

</code></pre><p>現在のロケールを確認する（windows）</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#f92672">&gt;</span> <span style="color:#75af00">Sys.getlocale</span><span style="color:#111">()</span>
<span style="color:#111">[1]</span> <span style="color:#d88200">&#34;LC_COLLATE=Japanese_Japan.932;LC_CTYPE=English_United States.1252;LC_MONETARY=Japanese_Japan.932;LC_NUMERIC=C;LC_TIME=Japanese_Japan.932&#34;</span>
</code></pre></div><p>Ubuntu でロケールを表示してみた。　ロケールに関連する環境変数はもっと多い</p>
<pre><code>$ locale
LANG=ja_JP.UTF-8
LANGUAGE=
LC_CTYPE=&quot;ja_JP.UTF-8&quot;
LC_NUMERIC=&quot;ja_JP.UTF-8&quot;
LC_TIME=&quot;ja_JP.UTF-8&quot;
LC_COLLATE=&quot;ja_JP.UTF-8&quot;
LC_MONETARY=&quot;ja_JP.UTF-8&quot;
LC_MESSAGES=&quot;ja_JP.UTF-8&quot;
LC_PAPER=&quot;ja_JP.UTF-8&quot;
LC_NAME=&quot;ja_JP.UTF-8&quot;
LC_ADDRESS=&quot;ja_JP.UTF-8&quot;
LC_TELEPHONE=&quot;ja_JP.UTF-8&quot;
LC_MEASUREMENT=&quot;ja_JP.UTF-8&quot;
LC_IDENTIFICATION=&quot;ja_JP.UTF-8&quot;
LC_ALL=ja_JP.UTF-8
</code></pre><p>R での表示言語を変更する</p>
<pre><code>setlocale(&quot;LC_ALL&quot;, &quot;English_United States.932&quot;)
</code></pre><h1 id="きになるパッケージ">きになるパッケージ</h1>
<h2 id="可視化-1">可視化</h2>
<ul>
<li>gganimate : gifアニメ</li>
<li>export : ggplotオブジェクトをパワポに変換する</li>
<li>ggridge 複数のヒストグラム比べるやつ</li>
</ul>
<h1 id="オブジェクトを調べる">オブジェクトを調べる</h1>
<p><code>class()</code> <code>typeof()</code> <code>mode()</code></p>
<p><code>str()</code> <code>attributes()</code></p>
</article>

      
<div class="book-footer justify-between">
  
  <div>
    
    <a class="flex align-center" href="https://github.com/teuder/notebook/commit/1c4b2b5935f1ddbb8f4d25bc2ff54f9630bdc3c3" title='Last modified 2020-05-27 by Masaki Tsuda' target="_blank" rel="noopener">
      <img src="/notebook/svg/calendar.svg" alt="Changed" />
      <span>2020-05-27</span>
    </a>
  </div>
  
  
  <div>
    
    <a class="flex align-center" href="https://github.com/teuder/notebook/edit/master/content/R/_index.md" target="_blank" rel="noopener">
      <img src="/notebook/svg/edit.svg" alt="Edit" />
      <span>Edit this page</span>
    </a>
    
  </div>
  
</div>


      
    </div>

    
  

  <aside class="book-toc level-3 fixed">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#ubuntu">Ubuntu</a></li>
  </ul>

  <ul>
    <li><a href="#環境変数">環境変数</a></li>
    <li><a href="#環境設定ファイル">環境設定ファイル</a>
      <ul>
        <li><a href="#renviron">.Renviron</a></li>
        <li><a href="#rprofile">.Rprofile</a></li>
        <li><a href="#rmakevars">~/.R/Makevars</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#ロケールを指定する文字列">ロケールを指定する文字列</a></li>
    <li><a href="#環境変数-1">環境変数</a></li>
  </ul>

  <ul>
    <li><a href="#可視化-1">可視化</a></li>
  </ul>
</nav>
  </aside>



  </main>

  
</body>

</html>
